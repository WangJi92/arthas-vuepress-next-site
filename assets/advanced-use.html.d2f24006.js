import{_ as r,r as i,o as d,c,a as t,b as s,w as n,F as h,d as e,e as l}from"./app.1edb3735.js";const _={},u=t("h1",{id:"advanced-usage",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#advanced-usage","aria-hidden":"true"},"#"),e(" Advanced Usage")],-1),p=t("h2",{id:"basic",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#basic","aria-hidden":"true"},"#"),e(" Basic")],-1),m=t("li",null,"help - display Arthas help",-1),b=t("li",null,"cls - clear the screen",-1),f=e("cat"),g=e(" - Concatenate and print files"),v=e("echo"),y=e(" - write arguments to the standard output"),w=e("grep"),j=e(" - Pattern searcher"),x=e("base64"),k=e(" - Encode and decode using Base64 representation."),A=e("tee"),C=e(" - Copies standard input to standard output, making a copy in zero or more files."),J=e("pwd"),V=e(" - Return working directory name"),M=t("li",null,"session - display current session information",-1),S=e("reset"),N=e(" - reset all the enhanced classes. All enhanced classes will also be reset when Arthas server is closed by "),E=t("code",null,"stop",-1),T=t("li",null,"version - print the version for the Arthas attached to the current Java process",-1),B=t("li",null,"history - view command history",-1),I=t("li",null,"quit/exit - exit the current Arthas session, without effecting other sessions",-1),O=t("li",null,"stop - terminate the Arthas server, all Arthas sessions will be destroyed",-1),U=e("keymap"),F=e(" - keymap for Arthas keyboard shortcut"),L=t("h2",{id:"jvm",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#jvm","aria-hidden":"true"},"#"),e(" JVM")],-1),P=e("dashboard"),R=e(" - dashboard for the system's real-time data"),q=e("thread"),z=e(" - show java thread information"),W=e("jvm"),$=e(" - show JVM information"),G=e("sysprop"),H=e(" - view/modify system properties"),D=e("sysenv"),K=e(" \u2014 view system environment variables"),Q=e("vmoption"),X=e(" - view/modify the vm diagnostic options."),Y=e("perfcounter"),Z=e(" - show JVM Perf Counter information"),ee=e("logger"),te=e(" - print the logger information, update the logger level"),se=e("getstatic"),oe=e(" - examine class's static properties"),ne=e("ognl"),ae=e(" - execute ognl expression"),le=e("mbean"),ie=e(" - show Mbean information"),re=e("heapdump"),de=e(" - dump java heap in hprof binary format, like "),ce=t("code",null,"jmap",-1),he=e("vmtool"),_e=e(" - jvm tool, getInstances in jvm, forceGc"),ue=t("h2",{id:"class-classloader",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#class-classloader","aria-hidden":"true"},"#"),e(" class/classloader")],-1),pe=e("sc"),me=e(" - check the info for the classes loaded by JVM"),be=e("sm"),fe=e(" - check methods info for the loaded classes"),ge=e("jad"),ve=e(" - decompile the specified loaded classes"),ye=e("mc"),we=e(" - Memory compiler, compiles "),je=t("code",null,".java",-1),xe=e(" files into "),ke=t("code",null,".class",-1),Ae=e(" files in memory"),Ce=e("retransform"),Je=e(" - load external "),Ve=t("code",null,"*.class",-1),Me=e(" files and retransform it into JVM"),Se=e("redefine"),Ne=e(" - load external "),Ee=t("code",null,"*.class",-1),Te=e(" files and re-define it into JVM"),Be=e("dump"),Ie=e(" - dump the loaded classes in byte code to the specified location"),Oe=e("classloader"),Ue=e(" - check the inheritance structure, urls, class loading info for the specified class; using classloader to get the url of the resource e.g. "),Fe=t("code",null,"java/lang/String.class",-1),Le=t("h2",{id:"monitor-watch-trace-related",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#monitor-watch-trace-related","aria-hidden":"true"},"#"),e(" monitor/watch/trace - related")],-1),Pe=t("strong",null,"Attention",-1),Re=e(": commands here are taking advantage of byte-code-injection, which means we are injecting some "),qe={href:"https://en.wikipedia.org/wiki/Aspect-oriented_programming",target:"_blank",rel:"noopener noreferrer"},ze=e("aspects"),We=e(" into the current classes for monitoring and statistics purpose. Therefore, when using it for online troubleshooting in your production environment, you'd better "),$e=t("strong",null,"explicitly specify",-1),Ge=e(" classes/methods/criteria, and remember to remove the injected code by "),He=t("code",null,"stop",-1),De=e(" or "),Ke=t("code",null,"reset",-1),Qe=e("."),Xe=e("monitor"),Ye=e(" - monitor method execution statistics"),Ze=e("watch"),et=e(" - display the input/output parameter, return object, and thrown exception of specified method invocation"),tt=e("trace"),st=e(" - trace the execution time of specified method invocation"),ot=e("stack"),nt=e(" - display the stack trace for the specified class and method"),at=e("tt"),lt=e(" - time tunnel, record the arguments and returned value for the methods and replay"),it=t("h2",{id:"authentication",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#authentication","aria-hidden":"true"},"#"),e(" authentication")],-1),rt=e("auth"),dt=e(" - authentication"),ct=t("h2",{id:"options",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#options","aria-hidden":"true"},"#"),e(" options")],-1),ht=e("options"),_t=e(" - check/set Arthas global options"),ut=t("h2",{id:"profiler-flame-graph",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#profiler-flame-graph","aria-hidden":"true"},"#"),e(" profiler/flame graph")],-1),pt=e("profiler"),mt=e(" - use "),bt={href:"https://github.com/jvm-profiling-tools/async-profiler",target:"_blank",rel:"noopener noreferrer"},ft=e("async-profiler"),gt=e(" to generate flame graph"),vt=l('<h2 id="pipe" tabindex="-1"><a class="header-anchor" href="#pipe" aria-hidden="true">#</a> pipe</h2><p>Arthas provides <code>pipe</code> to process the result returned from commands further, e.g. <code>sm java.lang.String * | grep &#39;index&#39;</code>. Commands supported in <code>pipe</code>:</p><ul><li>grep - filter the result with the given keyword</li><li>plaintext - remove the ANSI color</li><li>wc - count lines</li></ul><h2 id="async-jobs" tabindex="-1"><a class="header-anchor" href="#async-jobs" aria-hidden="true">#</a> async jobs</h2>',4),yt=e("async"),wt=e(" can be handy when a problem is hardly to reproduce in the production environment, e.g. one "),jt=t("code",null,"watch",-1),xt=e(" condition may happen only once in one single day."),kt=l('<ul><li>job control - use <code>&gt;</code> to redirect result into the log file, use <code>&amp;</code> to put the job to the background. Job keeps running even if the session is disconnected (the session lifecycle is 1 day by default)</li><li>jobs - list all jobs</li><li>kill - forcibly terminate the job</li><li>fg - bring the suspend job to the foreground</li><li>bg - put the job to run in the background</li></ul><h2 id="web-console" tabindex="-1"><a class="header-anchor" href="#web-console" aria-hidden="true">#</a> Web Console</h2><p>Arthas supports living inside a browser. The communication between arthas and browser is via websocket.</p>',3),At=e("Web Console"),Ct=t("h2",{id:"arthas-properties",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#arthas-properties","aria-hidden":"true"},"#"),e(" Arthas Properties")],-1),Jt=e("Arthas Properties"),Vt=t("h2",{id:"start-as-a-java-agent",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#start-as-a-java-agent","aria-hidden":"true"},"#"),e(" Start as a Java Agent")],-1),Mt=e("Start as a Java Agent"),St=l(`<h2 id="as-sh-and-arthas-boot-tips" tabindex="-1"><a class="header-anchor" href="#as-sh-and-arthas-boot-tips" aria-hidden="true">#</a> as.sh and arthas-boot tips</h2><ul><li>Select the process to be attached via the <code>select</code> option.</li></ul><p>Normally, <code>as.sh</code>/<code>arthas-boot.jar</code> needs to a pid, bacause the pid will change.</p><p>For example, with <code>math-game.jar</code> already started, use the <code>jps</code> command to see.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ jps
58883 math-game.jar
58884 Jps
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>select</code> option allows you to specify a process name, which is very convenient.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ ./as.sh --select math-game
Arthas script version: 3.3.6
[INFO] JAVA_HOME: /tmp/java/8.0.222-zulu
Arthas home: /Users/admin/.arthas/lib/3.3.6/arthas
Calculating attach execution time...
Attaching to 59161 using version /Users/admin/.arthas/lib/3.3.6/arthas...

real	0m0.572s
user	0m0.281s
sys	0m0.039s
Attach success.
telnet connecting to arthas server... current timestamp is 1594280799
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.
 /  O  \\ |  .--. &#39;&#39;--.  .--&#39;|  &#39;--&#39;  | /  O  \\ &#39;   .-&#39;
|  .-.  ||  &#39;--&#39;.&#39;   |  |   |  .--.  ||  .-.  |\`.  \`-.
|  | |  ||  |\\  \\    |  |   |  |  |  ||  | |  |.-&#39;    |
\`--&#39; \`--&#39;\`--&#39; &#39;--&#39;   \`--&#39;   \`--&#39;  \`--&#39;\`--&#39; \`--&#39;\`-----&#39;


wiki      https://arthas.aliyun.com/doc
tutorials https://arthas.aliyun.com/doc/arthas-tutorials.html
version   3.3.6
pid       58883
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="user-data-report" tabindex="-1"><a class="header-anchor" href="#user-data-report" aria-hidden="true">#</a> User data report</h2><p>After the <code>3.1.4</code> version, arthas support user data report.</p><p>At startup, use the <code>stat-url</code> option, such as: <code>./as.sh --stat-url &#39;http://192.168.10.11:8080/api/stat&#39;</code></p><p>There is a sample data report in the tunnel server that users can implement on their own.</p>`,11),Nt={href:"https://github.com/alibaba/arthas/blob/master/tunnel-server/src/main/java/com/alibaba/arthas/tunnel/server/app/web/StatController.java",target:"_blank",rel:"noopener noreferrer"},Et=e("StatController.java"),Tt=t("h2",{id:"other-features",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#other-features","aria-hidden":"true"},"#"),e(" Other features")],-1),Bt=e("Async support"),It=e("log the output"),Ot=e("batch"),Ut={href:"https://github.com/alibaba/arthas/issues/11",target:"_blank",rel:"noopener noreferrer"},Ft=e("how to use ognl");function Lt(Pt,Rt){const o=i("RouterLink"),a=i("ExternalLinkIcon");return d(),c(h,null,[u,p,t("ul",null,[m,b,t("li",null,[s(o,{to:"/en/doc/cat.html"},{default:n(()=>[f]),_:1}),g]),t("li",null,[s(o,{to:"/en/doc/echo.html"},{default:n(()=>[v]),_:1}),y]),t("li",null,[s(o,{to:"/en/doc/grep.html"},{default:n(()=>[w]),_:1}),j]),t("li",null,[s(o,{to:"/en/doc/base64.html"},{default:n(()=>[x]),_:1}),k]),t("li",null,[s(o,{to:"/en/doc/tee.html"},{default:n(()=>[A]),_:1}),C]),t("li",null,[s(o,{to:"/en/doc/pwd.html"},{default:n(()=>[J]),_:1}),V]),M,t("li",null,[s(o,{to:"/en/doc/reset.html"},{default:n(()=>[S]),_:1}),N,E]),T,B,I,O,t("li",null,[s(o,{to:"/en/doc/keymap.html"},{default:n(()=>[U]),_:1}),F])]),L,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/dashboard.html"},{default:n(()=>[P]),_:1}),R]),t("li",null,[s(o,{to:"/en/doc/thread.html"},{default:n(()=>[q]),_:1}),z]),t("li",null,[s(o,{to:"/en/doc/jvm.html"},{default:n(()=>[W]),_:1}),$]),t("li",null,[s(o,{to:"/en/doc/sysprop.html"},{default:n(()=>[G]),_:1}),H]),t("li",null,[s(o,{to:"/en/doc/sysenv.html"},{default:n(()=>[D]),_:1}),K]),t("li",null,[s(o,{to:"/en/doc/vmoption.html"},{default:n(()=>[Q]),_:1}),X]),t("li",null,[s(o,{to:"/en/doc/perfcounter.html"},{default:n(()=>[Y]),_:1}),Z]),t("li",null,[s(o,{to:"/en/doc/logger.html"},{default:n(()=>[ee]),_:1}),te]),t("li",null,[s(o,{to:"/en/doc/getstatic.html"},{default:n(()=>[se]),_:1}),oe]),t("li",null,[s(o,{to:"/en/doc/ognl.html"},{default:n(()=>[ne]),_:1}),ae]),t("li",null,[s(o,{to:"/en/doc/mbean.html"},{default:n(()=>[le]),_:1}),ie]),t("li",null,[s(o,{to:"/en/doc/heapdump.html"},{default:n(()=>[re]),_:1}),de,ce]),t("li",null,[s(o,{to:"/en/doc/vmtool.html"},{default:n(()=>[he]),_:1}),_e])]),ue,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/sc.html"},{default:n(()=>[pe]),_:1}),me]),t("li",null,[s(o,{to:"/en/doc/sm.html"},{default:n(()=>[be]),_:1}),fe]),t("li",null,[s(o,{to:"/en/doc/jad.html"},{default:n(()=>[ge]),_:1}),ve]),t("li",null,[s(o,{to:"/en/doc/mc.html"},{default:n(()=>[ye]),_:1}),we,je,xe,ke,Ae]),t("li",null,[s(o,{to:"/en/doc/retransform.html"},{default:n(()=>[Ce]),_:1}),Je,Ve,Me]),t("li",null,[s(o,{to:"/en/doc/redefine.html"},{default:n(()=>[Se]),_:1}),Ne,Ee,Te]),t("li",null,[s(o,{to:"/en/doc/dump.html"},{default:n(()=>[Be]),_:1}),Ie]),t("li",null,[s(o,{to:"/en/doc/classloader.html"},{default:n(()=>[Oe]),_:1}),Ue,Fe])]),Le,t("blockquote",null,[t("p",null,[Pe,Re,t("a",qe,[ze,s(a)]),We,$e,Ge,He,De,Ke,Qe])]),t("ul",null,[t("li",null,[s(o,{to:"/en/doc/monitor.html"},{default:n(()=>[Xe]),_:1}),Ye]),t("li",null,[s(o,{to:"/en/doc/watch.html"},{default:n(()=>[Ze]),_:1}),et]),t("li",null,[s(o,{to:"/en/doc/trace.html"},{default:n(()=>[tt]),_:1}),st]),t("li",null,[s(o,{to:"/en/doc/stack.html"},{default:n(()=>[ot]),_:1}),nt]),t("li",null,[s(o,{to:"/en/doc/tt.html"},{default:n(()=>[at]),_:1}),lt])]),it,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/auth.html"},{default:n(()=>[rt]),_:1}),dt])]),ct,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/options.html"},{default:n(()=>[ht]),_:1}),_t])]),ut,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/profiler.html"},{default:n(()=>[pt]),_:1}),mt,t("a",bt,[ft,s(a)]),gt])]),vt,t("p",null,[s(o,{to:"/en/doc/async.html"},{default:n(()=>[yt]),_:1}),wt,jt,xt]),kt,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/web-console.html"},{default:n(()=>[At]),_:1})])]),Ct,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/arthas-properties.html"},{default:n(()=>[Jt]),_:1})])]),Vt,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/agent.html"},{default:n(()=>[Mt]),_:1})])]),St,t("p",null,[t("a",Nt,[Et,s(a)])]),Tt,t("ul",null,[t("li",null,[s(o,{to:"/en/doc/async.html"},{default:n(()=>[Bt]),_:1})]),t("li",null,[s(o,{to:"/en/doc/save-log.html"},{default:n(()=>[It]),_:1})]),t("li",null,[s(o,{to:"/en/doc/batch-support.html"},{default:n(()=>[Ot]),_:1})]),t("li",null,[t("a",Ut,[Ft,s(a)])])])],64)}var zt=r(_,[["render",Lt],["__file","advanced-use.html.vue"]]);export{zt as default};
