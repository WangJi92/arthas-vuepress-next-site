import{_ as l,r as o,o as c,c as t,a as e,b as s,w as i,F as d,d as a,e as p}from"./app.1edb3735.js";const b={},h=e("h1",{id:"vmtool",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#vmtool","aria-hidden":"true"},"#"),a(" vmtool")],-1),m=e("blockquote",null,[e("p",null,"@since 3.5.1")],-1),u={href:"https://arthas.aliyun.com/doc/arthas-tutorials.html?language=cn&id=command-vmtool",target:"_blank",rel:"noopener noreferrer"},g=e("code",null,"vmtool",-1),v=a("\u5728\u7EBF\u6559\u7A0B"),_=e("p",null,[e("code",null,"vmtool"),a(" \u5229\u7528"),e("code",null,"JVMTI"),a("\u63A5\u53E3\uFF0C\u5B9E\u73B0\u67E5\u8BE2\u5185\u5B58\u5BF9\u8C61\uFF0C\u5F3A\u5236GC\u7B49\u529F\u80FD\u3002")],-1),x={href:"https://docs.oracle.com/javase/8/docs/platform/jvmti/jvmti.html",target:"_blank",rel:"noopener noreferrer"},f=a("JVM Tool Interface"),k=p(`<h3 id="\u83B7\u53D6\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u5BF9\u8C61" aria-hidden="true">#</a> \u83B7\u53D6\u5BF9\u8C61</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ vmtool --action getInstances --className java.lang.String --limit 10
@String[][
    @String[com/taobao/arthas/core/shell/session/Session],
    @String[com.taobao.arthas.core.shell.session.Session],
    @String[com/taobao/arthas/core/shell/session/Session],
    @String[com/taobao/arthas/core/shell/session/Session],
    @String[com/taobao/arthas/core/shell/session/Session.class],
    @String[com/taobao/arthas/core/shell/session/Session.class],
    @String[com/taobao/arthas/core/shell/session/Session.class],
    @String[com/],
    @String[java/util/concurrent/ConcurrentHashMap$ValueIterator],
    @String[java/util/concurrent/locks/LockSupport],
]
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>\u901A\u8FC7 <code>--limit</code>\u53C2\u6570\uFF0C\u53EF\u4EE5\u9650\u5236\u8FD4\u56DE\u503C\u6570\u91CF\uFF0C\u907F\u514D\u83B7\u53D6\u8D85\u5927\u6570\u636E\u65F6\u5BF9JVM\u9020\u6210\u538B\u529B\u3002\u9ED8\u8BA4\u503C\u662F10\u3002</p></blockquote><h3 id="\u6307\u5B9A-classloader-name" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A-classloader-name" aria-hidden="true">#</a> \u6307\u5B9A classloader name</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vmtool --action getInstances --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader --className org.springframework.context.ApplicationContext
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u6307\u5B9A-classloader-hash" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A-classloader-hash" aria-hidden="true">#</a> \u6307\u5B9A classloader hash</h3><p>\u53EF\u4EE5\u901A\u8FC7<code>sc</code>\u547D\u4EE4\u67E5\u627E\u5230\u52A0\u8F7Dclass\u7684 classloader\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ sc -d org.springframework.context.ApplicationContext
 class-info        org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext
 code-source       file:/private/tmp/demo-arthas-spring-boot.jar!/BOOT-INF/lib/spring-boot-1.5.13.RELEASE.jar!/
 name              org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext
...
 class-loader      +-org.springframework.boot.loader.LaunchedURLClassLoader@19469ea2
                     +-sun.misc.Launcher$AppClassLoader@75b84c92
                       +-sun.misc.Launcher$ExtClassLoader@4f023edb
 classLoaderHash   19469ea2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u7136\u540E\u7528<code>-c</code>/<code>--classloader</code> \u53C2\u6570\u6307\u5B9A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vmtool --action getInstances -c 19469ea2 --className org.springframework.context.ApplicationContext
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u6307\u5B9A\u8FD4\u56DE\u7ED3\u679C\u5C55\u5F00\u5C42\u6570" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u8FD4\u56DE\u7ED3\u679C\u5C55\u5F00\u5C42\u6570" aria-hidden="true">#</a> \u6307\u5B9A\u8FD4\u56DE\u7ED3\u679C\u5C55\u5F00\u5C42\u6570</h3><blockquote><p><code>getInstances</code> action\u8FD4\u56DE\u7ED3\u679C\u7ED1\u5B9A\u5230<code>instances</code>\u53D8\u91CF\u4E0A\uFF0C\u5B83\u662F\u6570\u7EC4\u3002</p></blockquote><blockquote><p>\u901A\u8FC7 <code>-x</code>/<code>--expand</code> \u53C2\u6570\u53EF\u4EE5\u6307\u5B9A\u7ED3\u679C\u7684\u5C55\u5F00\u5C42\u6B21\uFF0C\u9ED8\u8BA4\u503C\u662F1\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vmtool --action getInstances -c 19469ea2 --className org.springframework.context.ApplicationContext -x 2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u6267\u884C\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u6267\u884C\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u6267\u884C\u8868\u8FBE\u5F0F</h3><blockquote><p><code>getInstances</code> action\u8FD4\u56DE\u7ED3\u679C\u7ED1\u5B9A\u5230<code>instances</code>\u53D8\u91CF\u4E0A\uFF0C\u5B83\u662F\u6570\u7EC4\u3002\u53EF\u4EE5\u901A\u8FC7<code>--express</code>\u53C2\u6570\u6267\u884C\u6307\u5B9A\u7684\u8868\u8FBE\u5F0F\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vmtool --action getInstances --classLoaderClass org.springframework.boot.loader.LaunchedURLClassLoader --className org.springframework.context.ApplicationContext --express &#39;instances[0].getBeanDefinitionNames()&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u5F3A\u5236gc" tabindex="-1"><a class="header-anchor" href="#\u5F3A\u5236gc" aria-hidden="true">#</a> \u5F3A\u5236GC</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vmtool --action forceGc
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,19),C=a("\u53EF\u4EE5\u7ED3\u5408 "),L=e("code",null,"vmoption",-1),S=a(" \u547D\u4EE4\u52A8\u6001\u6253\u5F00"),I=e("code",null,"PrintGC",-1),w=a("\u5F00\u5173\u3002");function A(N,q){const n=o("ExternalLinkIcon"),r=o("RouterLink");return c(),t(d,null,[h,m,e("p",null,[e("a",u,[g,v,s(n)])]),_,e("ul",null,[e("li",null,[e("a",x,[f,s(n)])])]),k,e("ul",null,[e("li",null,[C,s(r,{to:"/doc/vmoption.html"},{default:i(()=>[L]),_:1}),S,I,w])])],64)}var j=l(b,[["render",A],["__file","vmtool.html.vue"]]);export{j as default};
