import{_ as a,r as o,o as l,c as r,a as e,b as t,F as i,d as n,e as c}from"./app.1edb3735.js";const u={},d=e("h1",{id:"options",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#options","aria-hidden":"true"},"#"),n(" options")],-1),p={href:"https://arthas.aliyun.com/doc/arthas-tutorials.html?language=en&id=command-options",target:"_blank",rel:"noopener noreferrer"},b=e("code",null,"options",-1),h=n(" online tutorial"),m=e("blockquote",null,[e("p",null,"Global options")],-1),f=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Default Value"),e("th",null,"Description")])],-1),g=e("tr",null,[e("td",null,"unsafe"),e("td",null,"false"),e("td",null,"whether to enhance to system-level class. Use it with caution since JVM may hang")],-1),v=e("tr",null,[e("td",null,"dump"),e("td",null,"false"),e("td",null,[n("whether to dump enhanced class to the external files. If it's on, enhanced class will be dumped into "),e("code",null,"/${application dir}/arthas-class-dump/"),n(", the specific output path will be output in the console")])],-1),_=e("tr",null,[e("td",null,"batch-re-transform"),e("td",null,"true"),e("td",null,"whether to re-transform matched classes in batch")],-1),x=e("tr",null,[e("td",null,"json-format"),e("td",null,"false"),e("td",null,"whether to output in JSON format")],-1),w=e("tr",null,[e("td",null,"disable-sub-class"),e("td",null,"false"),e("td",null,[n("whether to enable matching child classes. The default value is "),e("code",null,"true"),n(". If exact match is desire, turn off this flag")])],-1),j=e("td",null,"support-default-method",-1),E=e("td",null,"true",-1),T=n("whether to enable matching default method in interface. The default value is "),k=e("code",null,"true",-1),y=n(". Refer to "),O={href:"https://github.com/alibaba/arthas/issues/1105",target:"_blank",rel:"noopener noreferrer"},A=n("#1105"),V=e("tr",null,[e("td",null,"save-result"),e("td",null,"false"),e("td",null,[n("whether to save execution result. All execution results will be saved to "),e("code",null,"~/logs/arthas-cache/result.log"),n(" when it's turned on")])],-1),N=e("tr",null,[e("td",null,"job-timeout"),e("td",null,"1d"),e("td",null,"default timeout for background jobs. Background job will be terminated once it's timed out (i.e. 1d, 2h, 3m, 25s)")],-1),S=e("tr",null,[e("td",null,"verbose"),e("td",null,"false"),e("td",null,"This option enables print verbose information")],-1),I=e("tr",null,[e("td",null,"strict"),e("td",null,"true"),e("td",null,"whether to enable strict mode")],-1),M=c(`<h3 id="view-all-options" tabindex="-1"><a class="header-anchor" href="#view-all-options" aria-hidden="true">#</a> View all options</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ options
 LEVEL  TYPE    NAME          VALUE   SUMMARY               DESCRIPTION
-------------------------------------------------------------------------------------------------------
 0      boolea  unsafe        false   Option to support sy  This option enables to proxy functionality
        n                             stem-level class       of JVM classes. Due to serious security r
                                                            isk a JVM crash is possibly be introduced.
                                                             Do not activate it unless you are able to
                                                             manage.
 1      boolea  dump          false   Option to dump the e  This option enables the enhanced classes t
        n                             nhanced classes       o be dumped to external file for further d
                                                            e-compilation and analysis.
 1      boolea  batch-re-tra  true    Option to support ba  This options enables to reTransform classe
        n       nsform                tch reTransform Clas  s with batch mode.
                                      s
 2      boolea  json-format   false   Option to support JS  This option enables to format object outpu
        n                             ON format of object   t with JSON when -x option selected.
                                      output
 1      boolea  disable-sub-  false   Option to control in  This option disable to include sub class w
        n       class                 clude sub class when  hen matching class.
                                       class matching
 1      boolea  support-defa  true    Option to control in  This option disable to include default met
        n       ult-method            clude default method  hod in interface when matching class.
                                       in interface when c
                                      lass matching
 1      boolea  save-result   false   Option to print comm  This option enables to save each command&#39;s
        n                             and&#39;s result to log    result to log file, which path is \${user.
                                      file                  home}/logs/arthas-cache/result.log.
 2      String  job-timeout   1d      Option to job timeou  This option setting job timeout,The unit c
                                      t                     an be d, h, m, s for day, hour, minute, se
                                                            cond. 1d is one day in default
 1      boolea  print-parent  true    Option to print all   This option enables print files in parent
        n       -fields               fileds in parent cla  class, default value true.
                                      ss
 1      boolea  verbose       false   Option to print verb  This option enables print verbose informat
        n                             ose information       ion, default value false.
 1      boolea  strict        true    Option to strict mod  By default, strict mode is true, not allow
        n                             e                     ed to set object properties. Want to set o
                                                            bject properties, execute \`options strict
                                                            false\`
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="get-special-option-value" tabindex="-1"><a class="header-anchor" href="#get-special-option-value" aria-hidden="true">#</a> Get special option value</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ options json-format
 LEVEL  TYPE  NAME         VALUE  SUMMARY             DESCRIPTION
--------------------------------------------------------------------------------------------
 2      bool  json-format  false  Option to support   This option enables to format object
        ean                       JSON format of obj  output with JSON when -x option selec
                                  ect output          ted.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>By default, <code>json-format</code> is false. When set <code>json-format</code> to true, commands like <code>wathc</code>/<code>tt</code> will print result with <code>json</code> format.</p></blockquote><h3 id="set-special-option-value" tabindex="-1"><a class="header-anchor" href="#set-special-option-value" aria-hidden="true">#</a> Set special option value</h3><p>For example, to enable saving command execution result, input the command below:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ options save-result true                                                                                         
 NAME         BEFORE-VALUE  AFTER-VALUE                                                                            
----------------------------------------                                                                           
 save-result  false         true
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="set-unsafe-to-true-to-enhance-the-classes-under-the-java-package" tabindex="-1"><a class="header-anchor" href="#set-unsafe-to-true-to-enhance-the-classes-under-the-java-package" aria-hidden="true">#</a> Set <code>unsafe</code> to true to enhance the classes under the <code>java.*</code> package</h3><p>By default, <code>watch</code>/<code>trace</code>/<code>tt</code>/<code>trace</code>/<code>monitor</code> command do not support classes under <code>java.*</code> package. You can set <code>unsafe</code> to true to enhance the classes under the <code>java.*</code> package.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ options unsafe true
 NAME    BEFORE-VALUE  AFTER-VALUE
-----------------------------------
 unsafe  false         true
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ watch java.lang.invoke.Invokers callSiteForm
Press Q or Ctrl+C to abort.
Affect(class count: 1 , method count: 1) cost in 61 ms, listenerId: 1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="turn-off-strict-mode-allow-setting-object-properties-in-ognl-expressions" tabindex="-1"><a class="header-anchor" href="#turn-off-strict-mode-allow-setting-object-properties-in-ognl-expressions" aria-hidden="true">#</a> Turn off strict mode, allow setting object properties in ognl expressions</h3><blockquote><p>since 3.6.0</p></blockquote><p>For new users, there may be misuses when writing ognl expressions.</p><p>For example, for <code>Student</code>, when judging the age is equal to 18, the conditional expression may be mistakenly written as <code>target.age=18</code>, which actually sets the <code>age</code> of the current object to 18. The correct spelling is <code>target.age==18</code>.</p><p>In order to prevent misuse like the above, Arthas enables <code>strict</code> mode by default, in <code>ognl</code> expressions, it is forbidden to update the property of the object or call the <code>setter</code> method.</p><p>Take <code>MathGame</code> as an example, the following error message will appear.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ watch demo.MathGame primeFactors &#39;target&#39; &#39;target.illegalArgumentCount=1&#39;
Press Q or Ctrl+C to abort.
Affect(class count: 1 , method count: 1) cost in 206 ms, listenerId: 1
watch failed, condition is: target.illegalArgumentCount=1, express is: target, By default, strict mode is true, not allowed to set object properties. Want to set object properties, execute \`options strict false\`, visit /Users/admin/logs/arthas/arthas.log for more details.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>If the user want to change the object properties in the <code>ognl</code> expression, you can execute <code>options strict false</code> to turn off the <code>strict</code> mode.</p><ul><li>For more information, please refer to: https://github.com/alibaba/arthas/issues/2128</li></ul>`,21);function F(L,B){const s=o("ExternalLinkIcon");return l(),r(i,null,[d,e("p",null,[e("a",p,[b,h,t(s)])]),m,e("table",null,[f,e("tbody",null,[g,v,_,x,w,e("tr",null,[j,E,e("td",null,[T,k,y,e("a",O,[A,t(s)])])]),V,N,S,I])]),M],64)}var U=a(u,[["render",F],["__file","options.html.vue"]]);export{U as default};
