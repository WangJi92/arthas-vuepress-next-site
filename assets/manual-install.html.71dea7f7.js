import{_ as r,r as i,o,c as l,a,b as t,F as c,d as e,e as s}from"./app.1edb3735.js";const d={},h=a("h1",{id:"manually-install-arthas",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#manually-install-arthas","aria-hidden":"true"},"#"),e(" Manually Install Arthas")],-1),p=a("h2",{id:"manually-install-arthas-1",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#manually-install-arthas-1","aria-hidden":"true"},"#"),e(" Manually Install Arthas")],-1),u=a("p",null,"Download the latest version",-1),m=a("strong",null,"Latest version, Click To Download",-1),b=e(": "),g={href:"https://arthas.aliyun.com/download/latest_version",target:"_blank",rel:"noopener noreferrer"},v=a("img",{src:"https://img.shields.io/maven-central/v/com.taobao.arthas/arthas-packaging.svg?style=flat-square",alt:"",title:"Arthas"},null,-1),f=s(`<li><p>Unzip zip file</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>unzip arthas-packaging-bin.zip
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>Install Arthas</p><p>It is recommended to completely remove all old versions of Arthas before installation.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sudo su admin
rm -rf /home/admin/.arthas/lib/* # remove all the leftover of the old outdated Arthas
cd arthas
./install-local.sh # switch the user based on the owner of the target Java process.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>Start Arthas</p><p>Make sure <code>stop</code> the old Arthas server before start.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./as.sh
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li>`,3),_=s(`<h2 id="startup-with-as-sh-as-bat" tabindex="-1"><a class="header-anchor" href="#startup-with-as-sh-as-bat" aria-hidden="true">#</a> Startup with as.sh/as.bat</h2><h3 id="linux-unix-mac" tabindex="-1"><a class="header-anchor" href="#linux-unix-mac" aria-hidden="true">#</a> Linux/Unix/Mac</h3><p>You can install Arthas with one single line command on Linux, Unix, and Mac. Pls. copy the following command and paste it into the command line, then press <em>Enter</em> to run:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>curl -L https://arthas.aliyun.com/install.sh | sh
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>The command above will download the bootstrap script <code>as.sh</code> to the current directory. You can move it the any other place you want, or put its location in <code>$PATH</code>.</p><p>You can enter its interactive interface by executing <code>as.sh</code>, or execute <code>as.sh -h</code> for more help information.</p><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> Windows</h3>`,7),x=e("Latest Version, Click To Download: "),w={href:"https://arthas.aliyun.com/download/latest_version",target:"_blank",rel:"noopener noreferrer"},y=a("img",{src:"https://img.shields.io/maven-central/v/com.taobao.arthas/arthas-packaging.svg?style=flat-square",alt:"",title:"Arthas"},null,-1),k=s(`<p>Download and unzip, then find <code>as.bat</code> from &#39;bin&#39; directory. For now this script will only take one argument <code>pid</code>, which means you can only diagnose the local Java process. (Welcome any bat script expert to make it better \u2764\uFE0F)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>as.bat &lt;pid&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>If you want to diagnose Java process run as windows service, try these commands:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>as-service.bat -port &lt;port&gt;
as-service.bat -pid &lt;pid&gt;
as-service.bat -pid &lt;pid&gt; --interact
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Use this command to remove arthas service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>as-service.bat -remove
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="manual-command-line-startup" tabindex="-1"><a class="header-anchor" href="#manual-command-line-startup" aria-hidden="true">#</a> Manual command line startup</h2><p>If you fail to boot Arthas with the provided batch file, you could try to assemble the bootstrap command in the following way.</p><ol><li><p>Locate java in the target JVM:</p><ul><li>Linux/Unix/Mac: <code>ps aux | grep java</code></li><li>Windows: open the Process Monitor to search java</li></ul></li><li><p>Assemble bootstrap command:</p><p>Let&#39;s suppose we are using <code>/opt/jdk1.8/bin/java</code>, then the command should be:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/opt/jdk1.8/bin/java -Xbootclasspath/a:/opt/jdk1.8/lib/tools.jar \\
    -jar /tmp/arthas-packaging/arthas-core.jar \\
    -pid 15146 \\
    -target-ip 127.0.0.1 -telnet-port 3658 -http-port 8563 \\
    -core /tmp/arthas-packaging/arthas-core.jar \\
    -agent /tmp/arthas-packaging/arthas/arthas-agent.jar
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Note:</p><ul><li><code>-Xbootclasspath</code> adds tools.jar</li><li><code>-jar /tmp/arthas-packaging/arthas-core.jar</code> specifies main entry</li><li><code>-pid 15146</code> specifies the target java process PID</li><li><code>-target-ip 127.0.0.1</code> specifies the IP</li><li><code>-telnet-port 3658 -http-port 8563</code> specifies telnet and HTTP ports for remote access</li><li><code>-core /tmp/arthas-packaging/arthas-core.jar -agent /tmp/arthas-packaging/arthas/arthas-agent.jar</code> specifies core/agent jar package</li></ul><p>If you are running on JDK 1.9 or above\uFF0Cthen it&#39;s unnecessary to add <code>tools.jar</code> in option <code>-Xbootclasspath</code>.</p><p>You can find the logs from <code>~/logs/arthas/arthas.log</code>.</p></li><li><p>Use telnet to connect once attaching to the target JVM (in step 2) succeeds</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>telnet 127.0.0.1 3658
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol>`,9);function j(A,I){const n=i("ExternalLinkIcon");return o(),l(c,null,[h,p,a("ol",null,[a("li",null,[u,a("p",null,[m,b,a("a",g,[v,t(n)])])]),f]),_,a("p",null,[x,a("a",w,[y,t(n)])]),k],64)}var M=r(d,[["render",j],["__file","manual-install.html.vue"]]);export{M as default};
